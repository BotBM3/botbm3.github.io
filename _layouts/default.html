<!DOCTYPE html>
<html lang="en">
  
  <head>
    <meta charset="UTF-8" name="viewport" content="width=device-width, initial-scale=1">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <title>BOTBM3 (Battle of the Brain-Model-Mapping Metrics)</title>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <!-- define assets to sidebar if sidebar.css if {{ page.sidebar }} else default.css  -->

    {% if page.sidebar %}
      {% assign stylesheet = '/assets/css/sidebar.css' %}
    {% else %}
      {% assign stylesheet = '/assets/css/default.css' %}
    {% endif %}
    <link rel="stylesheet" href="{{ stylesheet | append: '?v=' | append: site.github.build_revision | relative_url }}">

  </head>

  <body>
    <a id="skip-to-content" href="#content">Skip to the content.</a>

    <header class="page-header" role="banner">
      <h1 class="project-name">{{ site.title | default: page.title | replace: "---", "---"}}</h1>
      <h2 class="project-tagline">{{ page.description | default: site.description }}</h2>
      {% if site.logo %}
      <div class="logo-container">
        <img src="{{ page.image | default: site.logo }}" alt="{{ page.title | default: site.title }}" class="project-name" />
      </div>
      {% endif %}
      {% for item in site.navigation %}
      <a href="{{ item[1] | relative_url }}" class="btn">{{ item[0] }}</a>
      {% endfor %}
    </header>

    <main id="content" class="main-content" role="main">

      {% if page.sidebar %}
        <div class="main-content-layout">
          <div class="sidebar">
            <ul id="sidebar-links"></ul>
          </div>
          <div class="main-content-inner">
            {{ content }}
          </div>
        </div>
      {% else %}
        {{ content }}
      {% endif %}

      <footer class="site-footer">
        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a>
          on {{ site.time | date: '%a, %d %B %Y'}}, with some imagery by <a href="https://openai.com/index/dall-e-3/">Dallâ€¢E3</a>. Click <a href="{{ site.github.repository }}">here</a> for source code.
        </span>
      </footer>

    </main>

    {% if page.sidebar %}
    <!-- <script src="{{ 'assets/scripts/sidebar.js' | append: site.github.build_revision | relative_url }}"> -->
    <script>
      $(document).ready(function() {
        buildSidebar();
        //handleAnchorScrolling();
    });

    function buildSidebar(contentClassId='.main-content' , sidebarId='#sidebar-links') {
        const content = $(contentClassId);
        const sidebarLinks = $(sidebarId);
        const headers = content.find('h1, h2, h3, h4, h5, h6');

        let currentList = sidebarLinks;
        let previousLevel = 1;

        headers.each(function() {
            const header = $(this);
            if (header.closest('.no-sidebar').length === 0) { // Skip headers within 'no-sidebar'
                const level = parseInt(header.prop('tagName').substr(1));
                const text = header.text();
                const id = header.attr('id') || header.text().toLowerCase().replace(/[^a-z0-9]+/g, '-');

                header.attr('id', id);

                const link = $('<a>').text(text).attr('href', '#' + id);
                const listItem = $('<li>').append(link);

                if (header.parents('.sidebar-toggle').length > 0) {
                    listItem.addClass('toggle-item');
                    listItem.children('a').click(function(e) {
                        e.preventDefault();
                        $(this).parent().toggleClass('expanded');
                        $(this).parent().children('ul').slideToggle(); // Smoothly toggle visibility of nested lists
                    });
                }

                if (level === 1) {
                    sidebarLinks.append(listItem);
                    currentList = $('<ul>').appendTo(listItem);
                    previousLevel = 2;
                } else {
                    if (level > previousLevel) {
                        const newList = $('<ul>');
                        currentList.children('li').last().append(newList);
                        currentList = newList;
                    } else if (level < previousLevel) {
                        for (let i = 0; i < previousLevel - level; i++) {
                            currentList = currentList.parents('ul').first();
                        }
                    }

                    currentList.append(listItem);
                    previousLevel = level;
                }
            }
        });
    };
    </script>
    {% endif %}
  </body>
</html>